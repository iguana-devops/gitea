{{if eq .PackageDescriptor.Package.Type "arch"}}
<h4 class="ui top attached header">{{ctx.Locale.Tr "packages.installation"}}</h4>
<div class="ui attached segment">
	<div class="ui form">
		<div class="field">
			<label>{{svg "octicon-gear"}} {{ctx.Locale.Tr "packages.arch.pacmanconf"}}</label>
			<div class="markup">
				<pre
					class="code-block"><code>[{{.PackageDescriptor.Owner.LowerName}}.{{.RegistryHost}}]
SigLevel = Optional TrustAll
Server = <origin-url data-url="{{AppSubUrl}}/api/packages/{{.PackageDescriptor.Owner.Name}}/arch/$distribution/$arch"></origin-url></code></pre>
			</div>
		</div>
		<div class="field">
			<label>{{svg "octicon-sync"}} {{ctx.Locale.Tr "packages.arch.pacmansync"}}</label>
			<div class="markup">
				<pre class="code-block"><code>pacman -Sy {{.PackageDescriptor.Package.LowerName}}</code></pre>
			</div>
		</div>
		<div class="field">
			<label>{{ctx.Locale.Tr "packages.registry.documentation" "Arch"
				"https://docs.gitea.com/usage/packages/arch/"}}</label>
		</div>
	</div>
</div>

<h4 class="ui top attached header">{{ctx.Locale.Tr "packages.arch.version.properties"}}</h4>
<div class="ui attached segment">
	<table class="ui very basic compact table">
		<tbody>
			<tr>
				<td class="collapsing">
					<h5>{{ctx.Locale.Tr "packages.arch.version.description"}}</h5>
				</td>
				<td>{{.PackageDescriptor.Metadata.Description}}</td>
			</tr>

			{{if .PackageDescriptor.Metadata.Groups}}
			<tr>
				<td class="collapsing">
					<h5>{{ctx.Locale.Tr "packages.arch.version.groups"}}</h5>
				</td>
				<td>{{StringUtils.Join $.PackageDescriptor.Metadata.Groups ", "}}</td>
			</tr>
			{{end}}

			{{if .PackageDescriptor.Metadata.Provides}}
			<tr>
				<td class="collapsing">
					<h5>{{ctx.Locale.Tr "packages.arch.version.provides"}}</h5>
				</td>
				<td>{{StringUtils.Join $.PackageDescriptor.Metadata.Provides ", "}}</td>
			</tr>
			{{end}}

			{{if .PackageDescriptor.Metadata.Depends}}
			<tr>
				<td class="collapsing">
					<h5>{{ctx.Locale.Tr "packages.arch.version.depends"}}</h5>
				</td>
				<td>{{StringUtils.Join $.PackageDescriptor.Metadata.Depends ", "}}</td>
			</tr>
			{{end}}

			{{if .PackageDescriptor.Metadata.OptDepends}}
			<tr>
				<td class="collapsing">
					<h5>{{ctx.Locale.Tr "packages.arch.version.optdepends"}}</h5>
				</td>
				<td>{{StringUtils.Join $.PackageDescriptor.Metadata.OptDepends ", "}}</td>
			</tr>
			{{end}}

			{{if .PackageDescriptor.Metadata.MakeDepends}}
			<tr>
				<td class="collapsing">
					<h5>{{ctx.Locale.Tr "packages.arch.version.makedepends"}}</h5>
				</td>
				<td>{{StringUtils.Join $.PackageDescriptor.Metadata.MakeDepends ", "}}</td>
			</tr>
			{{end}}

			{{if .PackageDescriptor.Metadata.CheckDepends}}
			<tr>
				<td class="collapsing">
					<h5>{{ctx.Locale.Tr "packages.arch.version.checkdepends"}}</h5>
				</td>
				<td>{{StringUtils.Join $.PackageDescriptor.Metadata.CheckDepends ", "}}</td>
			</tr>
			{{end}}

			{{if .PackageDescriptor.Metadata.Conflicts}}
			<tr>
				<td class="collapsing">
					<h5>{{ctx.Locale.Tr "packages.arch.version.conflicts"}}</h5>
				</td>
				<td>{{StringUtils.Join $.PackageDescriptor.Metadata.Conflicts ", "}}</td>
			</tr>
			{{end}}

			{{if .PackageDescriptor.Metadata.Replaces}}
			<tr>
				<td class="collapsing">
					<h5>{{ctx.Locale.Tr "packages.arch.version.replaces"}}</h5>
				</td>
				<td>{{StringUtils.Join $.PackageDescriptor.Metadata.Replaces ", "}}</td>
			</tr>
			{{end}}

			{{if .PackageDescriptor.Metadata.Backup}}
			<tr>
				<td class="collapsing">
					<h5>{{ctx.Locale.Tr "packages.arch.version.backup"}}</h5>
				</td>
				<td>{{StringUtils.Join $.PackageDescriptor.Metadata.Backup ", "}}</td>
			</tr>
			{{end}}

			{{if .PackageDescriptor.Metadata.Xdata}}
			<tr>
				<td class="collapsing">
					<h5>{{ctx.Locale.Tr "packages.arch.version.xdata"}}</h5>
				</td>
				<td>{{StringUtils.Join $.PackageDescriptor.Metadata.Xdata ", "}}</td>
			</tr>
			{{end}}
		</tbody>
	</table>
</div>

{{range .PackageDescriptor.Files}}
<h4 class="ui top attached header">{{ctx.Locale.Tr "packages.arch.file.properties"}}: {{.File.Name}}</h4>
<div class="ui attached segment">
	<table class="ui very basic compact table">
		{{$CompressedSize := ""}}
		{{$InstalledSize := ""}}
		{{$SHA256 := ""}}
		{{$BuildDate := ""}}
		{{$Packager := ""}}
		{{$Architecture := ""}}
		{{$Distribution := ""}}

		{{range .Properties}}
			{{if eq .Name "arch.compsize"}}
				{{$CompressedSize = .Value}}
			{{end}}
			{{if eq .Name "arch.inssize"}}
				{{$InstalledSize = .Value}}
			{{end}}
			{{if eq .Name "arch.sha256"}}
				{{$SHA256 = .Value}}
			{{end}}
			{{if eq .Name "arch.builddate"}}
				{{$BuildDate = .Value}}
			{{end}}
			{{if eq .Name "arch.packager"}}
				{{$Packager = .Value}}
			{{end}}
			{{if eq .Name "arch.architecture"}}
				{{$Architecture = .Value}}
			{{end}}
			{{if eq .Name "arch.distribution"}}
				{{$Distribution = .Value}}
			{{end}}
		{{end}}
		<tbody>
			<tr>
				<td class="collapsing">
					<h5>{{ctx.Locale.Tr "packages.arch.file.architecture"}}</h5>
				</td>
				<td>{{$Architecture}}</td>
			</tr>
			<tr>
				<td class="collapsing">
					<h5>{{ctx.Locale.Tr "packages.arch.file.distribution"}}</h5>
				</td>
				<td>{{$Distribution}}</td>
			</tr>
			<tr>
				<td class="collapsing">
					<h5>{{ctx.Locale.Tr "packages.arch.file.compsize"}}</h5>
				</td>
				<td>{{$CompressedSize}}</td>
			</tr>
			<tr>
				<td class="collapsing">
					<h5>{{ctx.Locale.Tr "packages.arch.file.inssize"}}</h5>
				</td>
				<td>{{$InstalledSize}}</td>
			</tr>
			<tr>
				<td class="collapsing">
					<h5>{{ctx.Locale.Tr "packages.arch.file.sha256"}}</h5>
				</td>
				<td>{{$SHA256}}</td>
			</tr>
			<tr>
				<td class="collapsing">
					<h5>{{ctx.Locale.Tr "packages.arch.file.builddate"}}</h5>
				</td>
				<td>{{$BuildDate}}</td>
			</tr>
			<tr>
				<td class="collapsing">
					<h5>{{ctx.Locale.Tr "packages.arch.file.packager"}}</h5>
				</td>
				<td>{{$Packager}}</td>
			</tr>
		</tbody>
	</table>
</div>
{{end}}
{{end}}
