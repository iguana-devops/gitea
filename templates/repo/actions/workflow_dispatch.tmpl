<div class="ui blue info message tw-flex tw-justify-between tw-items-center">
	<span class="ui text middle">{{ctx.Locale.Tr "actions.workflow.has_workflow_dispatch"}}</span>
	<button class="ui mini button show-modal" data-modal="#runWorkflowDispatchModal">{{ctx.Locale.Tr "actions.workflow.run"}}{{svg "octicon-triangle-down" 14 "dropdown icon"}}</button>
</div>
<div id="runWorkflowDispatchModal" class="ui mini modal">
	<div class="content">
		<form id="runWorkflowDispatchForm" class="ui form" action="{{$.Link}}/run?workflow={{$.CurWorkflow}}&actor={{$.CurActor}}&status={{.Status}}" method="post">
			{{.CsrfTokenHtml}}
			<div class="ui field required">
				<label>{{ctx.Locale.Tr "actions.workflow.from_ref"}}:</label>
				<div class="ui filter dropdown button select-branch">
					<input type="hidden" name="ref" value="refs/heads/{{index .Branches 0}}">
					{{svg "octicon-git-branch"}}
					<span class="text branch-name gt-ellipsis">{{index .Branches 0}}</span>
					<div class="menu">
						<div class="ui icon search input tw-w-auto">
							<i class="search icon">{{svg "octicon-search" 16 "search icon"}}</i>
							<input type="text" placeholder="{{ctx.Locale.Tr "repo.filter_branch_and_tag"}}">
						</div>
						<div class="header">
							<div class="ui grid">
								<div class="two column row">
									<a class="reference column muted" href="#" data-target="#branch-list">
										<span class="text black">
											{{svg "octicon-git-branch" 16 "tw-mr-1"}}{{ctx.Locale.Tr "repo.branches"}}
										</span>
									</a>
									<a class="reference column muted" href="#" data-target="#tag-list">
										<span class="text">
											{{svg "octicon-tag" 16 "tw-mr-1"}}{{ctx.Locale.Tr "repo.tags"}}
										</span>
									</a>
								</div>
							</div>
						</div>
						<div class="branch-tag-divider"></div>
						<div id="branch-list" class="scrolling menu reference-list-menu">
							{{range .Branches}}
								<div class="item" data-value="refs/heads/{{.}}" title="{{.}}">{{.}}</div>
							{{else}}
								<div class="item">{{ctx.Locale.Tr "no_results_found"}}</div>
							{{end}}
						</div>
						<div id="tag-list" class="scrolling menu reference-list-menu tw-hidden">
							{{range .Tags}}
								<div class="item" data-value="refs/tags/{{.}}" title="{{.}}">{{.}}</div>
							{{else}}
								<div class="item">{{ctx.Locale.Tr "no_results_found"}}</div>
							{{end}}
						</div>
					</div>
				</div>
			</div>

			{{range $key, $item := .WorkflowDispatchConfig.Inputs}}
			<div class="ui field {{if .Required}}required{{end}}">
				{{if eq .Type "choice"}}
					<label>{{$key}}:</label>
					<select class="ui fluid dropdown" name="{{$key}}">
						{{range .Options}}
						<option value="{{.}}" {{if eq $item.Default .}}selected{{end}} >{{.}}</option>
						{{end}}
					</select>
					<span class="help">{{.Description}}</span>
				{{else if eq .Type "boolean"}}
					<div class="ui inline toggle checkbox">
						<label>{{$key}}</label>
						<input type="checkbox" name="{{$key}}" {{if eq .Default "true"}}checked{{end}}>
						<span class="help">{{.Description}}</span>
					</div>
				{{else if eq .Type "number"}}
					<label>{{$key}}:</label>
					<input name="{{$key}}" value="{{.Default}}" {{if .Required}}required{{end}}>
					<span class="help">{{.Description}}</span>
				{{else}}
					<label>{{$key}}:</label>
					<input name="{{$key}}" value="{{.Default}}" {{if .Required}}required{{end}}>
					<span class="help">{{.Description}}</span>
				{{end}}
			</div>
			{{end}}
			<button class="ui tiny primary button" type="submit">Submit</button>
		</form>
	</div>
</div>
