{{$index := 0}}
<div class="timeline-item commits-list">
{{range .comment.Commits}}
	{{$tag := printf "%s-%d" $.comment.HashTag $index}}
	{{$index = Eval $index "+" 1}}
	<div class="singular-commit" id="{{$tag}}">
		<span class="badge badge-commit">{{svg "octicon-git-commit"}}</span>
		{{if .User}}
			<a class="avatar" href="{{.User.HomeLink}}">{{ctx.AvatarUtils.Avatar .User 20}}</a>
		{{else}}
			{{ctx.AvatarUtils.AvatarByEmail .Author.Email .Author.Name 20}}
		{{end}}

		{{$commitLink:= printf "%s/commit/%s" $.comment.Issue.PullRequest.BaseRepo.Link (PathEscape .ID.String)}}

		<div class="tw-flex-1">
			<span class="tw-font-mono gt-ellipsis" title="{{.Summary}}">
				{{- RenderCommitMessageLinkSubject $.root.Context .Message $commitLink ($.comment.Issue.PullRequest.BaseRepo.ComposeMetas ctx) -}}
			</span>

			{{if IsMultilineCommitMessage .Message}}
				<button class="ui button ellipsis-button show-panel toggle tw-ml-1" data-panel="[data-singular-commit-body-for='{{$tag}}']">...</button>
			{{end}}
		</div>

		<span class="tw-flex tw-items-center tw-gap-2">
			{{template "repo/commit_statuses" dict "Status" .Status "Statuses" .Statuses}}
			{{if .Signature}}
				{{template "repo/signature_badge" dict "root" $.root "verification" .Verification}}
			{{end}}
			<a href="{{$commitLink}}" rel="nofollow" class="commit-hash-link tw-p-2 hover:tw-bg-hover hover:tw-no-underline tw-rounded-lg">{{ShortSha .ID.String}}</a>
		</span>
	</div>
	{{if IsMultilineCommitMessage .Message}}
	<pre class="commit-body tw-ml-[33px] tw-hidden" data-singular-commit-body-for="{{$tag}}">
		{{- RenderCommitBody $.root.Context .Message ($.comment.Issue.PullRequest.BaseRepo.ComposeMetas ctx) -}}
	</pre>
	{{end}}
{{end}}
</div>
